# Giftchain smart contract project
The idea behind this smart contract is to provide the necessary logic for the customer to be able to issue a new gift card that is rechargeable and transferable.

The account wanting to give a gift card as a present just has to call the corresponding function on your smart contract, provide the beneficiary account address, select the amount for the gift card, and pay for it with Ethereum using MetaMask.

Our Giftchain smart contract will then generate the gift card according to the parameters. For example, we can have the gift cards generated by our smart contracts that accept any amount of funding and accepted rechargeable funds.

Our smart contract implements the ERC 20 and ERC 1155 standard in order to generate the gift card token.
## Developing the GiftCardIssuer Smart Contract
In the following paragraphs we will go over the most important aspects of the Giftchain  smart contract.
### Structure of a Gift Card
This is how a gift card issued by our smart contracts would look:
```sh
struct Card { uint value; uint issueDate; uint ExpireDate; uint cardId; address generatedBy;}
```
The struct above defines the basic properties of the gift cards that we will be issuing.
```sh
struct reward { uint points;  uint issueDate;  uint ExpireDate; }
```
The struct above defines the basic properties of the reward gift.
### Issuing a New Gift Card
Users can **issue new gift cards** by calling the payable function `GiftCardbBuyFee()` which call the `issueGiftCard()` that takes 2 parameters:
```sh
function GiftCardbBuyFee() public payable
function issueGiftCard(address _beneficiary,uint _value) private
```
- _beneficiary: Which is the account that will be able to use the issued gift card.
- _value: which is the amount of funds the gift card contains.

When the two function is executed, a new gift card will be issued to the name of the beneficiary and with the funds sent alongside the function call.
### Recharging and Transferring the Gift Cards
As defined in the gift cardâ€™s business section, we can transfer and recharge the gift cards.
**A transfer gift card** can be given to another account by the account currently set as beneficiary. All they have to do is call the following function:
`transferGiftCardTo()` that takes 1 parameter:
- _ newBeneficiary: Which is the account that transferred the gift card to and now owns the gift card.
```sh
function transferGiftCardTo(address _newBeneficiary)
```
**A rechargeable gift card** can have funds added to it. Only the owner can call the following function to add funds to an existing gift card:
Users can recharge an existing gift cards by calling the payable function `GiftCardAddFee()` which call the `addFundsToGiftCard()` that takes 1 parameter:
- _amount: which is the amount of funds added to the gift card.
```sh
function GiftCardAddFee(uint _amount) public payable
function addFundsToGiftCard(uint _amount)
```
### Withdraw from the Gift Cards
Users can **withdraw from the gift cards** by calling the function `withdrawMerchantBalance()` that takes 1 parameter:
- _amount: which is the amount of funds to withdraw from the gift card.
```sh
function withdrawMerchantBalance(uint _amount )
```
### The Reward Gift Cards
**Reward cards** are meant for customers to earn reward points and redeeming the reward offers.
Users can acquire a reward gift cards by calling the function `Redeem()` which call the `issueRewards()` that takes 1 parameter:
- _value: which is the number of redeem point the account has.
```sh
function Redeem()
function issueRewards(uint _value)
```
## Installation of the Giftchain smart contract
- The smart contract requires the ganache to be installed.

https://www.trufflesuite.com/ganache
- The smart contract connects to the MetaMask accounts

https://metamask.io
- The smart contract is implemented with Webpack.

https://www.trufflesuite.com/boxes/webpack

In order to run the smart contract, run the following command on the terminal
```sh
truffle develop
compile
migrate
```
Then in another terminal run the following command
```sh
cd app
npm run dev
```
**Finally copy the localhost link and paste it on web browser preferably google chrome.**
